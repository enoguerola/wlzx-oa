<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" creationComplete="init()">
	<s:layout>
		<s:BasicLayout/>
	</s:layout>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import spark.components.TextArea;
			
			import oa.entity.receipt.FileFlowModel;
			import oa.entity.receipt.ReceiptModel;
			import basic.utils.DateUtil;
			
			protected var list:ArrayCollection;
			
			protected function init():void
			{
				// TODO Auto-generated method stub
				var parent:Object = this.parentDocument as Object;
				var id:String = parent.id;
				fileFlowServiceRO.getAllList(id);
				
				_hao.text = parent._hao;
				_zi.text = parent._zi;
				in_date.text = parent.in_date;
				in_number.text = parent.inNumber;
				zhutici.text = parent.subject;
				in_department.text = parent.office;
			}
			
			protected function fileFlowServiceGetList_result(event:ResultEvent):void
			{
				// TODO Auto-generated method stub
			}
			
			protected function fileFlowServiceSave_result(event:ResultEvent):void
			{
				// TODO Auto-generated method stub
			}
			
			protected function faultHandler(event:FaultEvent):void
			{
				// TODO Auto-generated method stub
				Alert.show(event.fault.faultString, 'Error');
			}
			
			private function save(isCompleted:int):void
			{
				if(isCompleted == 1){
					Alert.show("确定提交?", "确定", Alert.YES | Alert.NO, null, function(event:CloseEvent):void{
						if(event.detail == Alert.YES)
							doSave(isCompleted);
					});
				}else
					doSave(isCompleted);
			}
			
			protected function doSave(isCompleted:int):void
			{
			
			}
			
			protected function setNameAndDate(text:TextArea, fileflow:FileFlowModel):void
			{
				var name:String = this.parentApplication.getTeacherNameByAccountId(fileflow.user);
				text.text += "\n\n\t" + name + "\n\t  " + dateformatter.format(fileflow.completedDate);
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
		<s:RemoteObject concurrency="last" destination="fileFlowServiceDest" id="fileFlowServiceRO" fault="faultHandler(event)" showBusyCursor="true">
			<s:method concurrency="last" name="getAllList" result="fileFlowServiceGetList_result(event)"/>
			<s:method concurrency="last" name="save" result="fileFlowServiceSave_result(event)"/>
		</s:RemoteObject>
		<mx:DateFormatter formatString="YYYY-MM-DD" id="dateformatter"/>
	</fx:Declarations>
	<s:VGroup width="100%" height="100%" horizontalAlign="center">
		<s:VGroup width="100%" height="5%">
			<s:HGroup>
				<s:Button label="提交" color="#000000" click="save(1)" id="save1"/>
				<s:Button label="保存" color="#000000" click="save(0)" id="save0"/>
			</s:HGroup>
		</s:VGroup>
		<s:VGroup width="100%" height="95%" id="content" verticalAlign="middle" horizontalAlign="left" paddingBottom="10" paddingLeft="10" paddingRight="10">
			<s:VGroup width="100%" horizontalAlign="center" height="10%" verticalAlign="middle">
				<s:Label text="温  岭  中 学 收  文  处  理 专 用 纸" color="#ff0000" id="detail_title" width="100%" textAlign="center" fontSize="16" fontWeight="bold" height="18"/>
				<s:HGroup horizontalAlign="right" right="20" color="#ff0000">
					<s:Label text="收文：" visible="true" textAlign="right" />
					<s:Label text="" id="_zi"/>
					<s:Label text="字： 第" visible="true"/>
					<s:Label text="" id="_hao"/>
					<s:Label text="号" id="postTime"/>
				</s:HGroup>
			</s:VGroup>
			<s:HGroup height="6%" verticalAlign="middle">
				<mx:FormHeading label="来文机关: " color="#ff0000" width="100"/>
				<s:Label text="" id="in_department" width="100"/>
				<s:Label text=" " width="100"/>
				<mx:FormHeading label="来文号: " color="#ff0000" width="100"/>
				<s:Label text="dd" id="in_number" width="100"/>
				<mx:FormHeading label="来文日期:" width="100" color="#ff0000" />
				<s:Label text="" id="in_date" width="100"/>
			</s:HGroup>
			<s:Line width="100%" depth="1">
				<s:stroke>
					<s:SolidColorStroke color="0xff0000" weight="1" caps="square"/>
				</s:stroke>
			</s:Line>
			<s:VGroup width="100%" height="83%" horizontalAlign="left"  verticalAlign="top" paddingRight="20" id="inputGroup" paddingTop="20">
				<s:HGroup width="100%" verticalAlign="middle">
					<mx:FormHeading label="主题词:" color="#ff0000" width="10%"/>
					<s:VGroup width="90%">
						<mx:Text id="zhutici" width="100%" text="--"></mx:Text>
						<s:Line depth="2" width="100%">
							<s:stroke>
								<s:SolidColorStroke color="0xff0000" weight="1" caps="square"/>
							</s:stroke>
						</s:Line>
					</s:VGroup>
				</s:HGroup>
			</s:VGroup>	
		</s:VGroup>
		
	</s:VGroup>
</s:Group>
